{"ast":null,"code":"import { Subject } from 'rxjs';\nexport class ProductServiceHelper {\n  constructor() {\n    // Cart\n    this.storageSub = new Subject();\n  }\n  watchStorage() {\n    return this.storageSub.asObservable();\n  }\n  getProductsObject(products) {\n    let storage = this.getProductsFromStorage(),\n      items;\n    if (storage != null && storage != '') {\n      items = JSON.parse(storage);\n      return products.filter(product => {\n        return items.includes(product.id.toString());\n      });\n    }\n    return [];\n  }\n  addProductToStorage(id) {\n    let storage = this.getProductsFromStorage(),\n      items;\n    if (storage != null && storage != '') {\n      items = JSON.parse(storage);\n      items.push(id.toString());\n      localStorage.setItem('findpharma_cart', JSON.stringify(items));\n      this.storageSub.next(JSON.stringify(storage));\n    } else {\n      localStorage.setItem('findpharma_cart', JSON.stringify([id.toString()]));\n      this.storageSub.next(JSON.stringify(storage));\n    }\n  }\n  getProductsFromStorageById(id) {\n    let storage = this.getProductsFromStorage(),\n      items;\n    if (storage != null && storage != '') {\n      items = JSON.parse(storage);\n      items = items.filter(item => {\n        return parseInt(item) == id;\n      });\n      return items;\n    }\n    return [];\n  }\n  decrementQuantityFromStorage(id) {\n    let storage = this.getProductsFromStorage(),\n      items;\n    if (storage != null && storage != '') {\n      items = JSON.parse(storage);\n      items.splice(items.indexOf(id.toString()), 1);\n      localStorage.setItem('findpharma_cart', JSON.stringify(items));\n      this.storageSub.next(JSON.stringify(items));\n    }\n  }\n  deleteProductFromStorage(id) {\n    let storage = this.getProductsFromStorage(),\n      items,\n      itemsToDelete;\n    if (storage != null && storage != '') {\n      items = JSON.parse(storage);\n      itemsToDelete = this.getProductsFromStorageById(id);\n      itemsToDelete.forEach(item => items.splice(items.findIndex(e => e == item), 1));\n      localStorage.setItem('findpharma_cart', JSON.stringify(items));\n      this.storageSub.next(JSON.stringify(items));\n    }\n  }\n  getProductsFromStorage() {\n    return localStorage.getItem('findpharma_cart') != null ? localStorage.getItem('findpharma_cart') : '';\n  }\n  getProductsLengthFromStorage() {\n    let storage = this.getProductsFromStorage();\n    return storage != null && storage != '' ? JSON.parse(storage).length : 0;\n  }\n  // Wishlist\n  getWishlistProductsObject(products) {\n    let storage = this.getWishlistProductsFromStorage(),\n      items;\n    if (storage != null && storage != '') {\n      items = JSON.parse(storage);\n      return products.filter(product => {\n        return items.includes(product.id.toString());\n      });\n    }\n    return [];\n  }\n  addWishlistProductToStorage(id) {\n    let storage = this.getWishlistProductsFromStorage(),\n      items;\n    if (storage != null && storage != '') {\n      items = JSON.parse(storage);\n      items.push(id.toString());\n      localStorage.setItem('findpharma_wishlist', JSON.stringify(items));\n      this.storageSub.next(JSON.stringify(storage));\n    } else {\n      localStorage.setItem('findpharma_wishlist', JSON.stringify([id.toString()]));\n      this.storageSub.next(JSON.stringify(storage));\n    }\n  }\n  getWishlistProductsFromStorageById(id) {\n    let storage = this.getWishlistProductsFromStorage(),\n      items;\n    if (storage != null && storage != '') {\n      items = JSON.parse(storage);\n      items = items.filter(item => {\n        return parseInt(item) == id;\n      });\n      return items;\n    }\n    return [];\n  }\n  decrementWishlistQuantityFromStorage(id) {\n    let storage = this.getWishlistProductsFromStorage(),\n      items;\n    if (storage != null && storage != '') {\n      items = JSON.parse(storage);\n      items.splice(items.indexOf(id.toString()), 1);\n      localStorage.setItem('findpharma_wishlist', JSON.stringify(items));\n      this.storageSub.next(JSON.stringify(items));\n    }\n  }\n  deleteWishlistProductFromStorage(id) {\n    let storage = this.getWishlistProductsFromStorage(),\n      items,\n      itemsToDelete;\n    if (storage != null && storage != '') {\n      items = JSON.parse(storage);\n      itemsToDelete = this.getWishlistProductsFromStorageById(id);\n      itemsToDelete.forEach(item => items.splice(items.findIndex(e => e == item), 1));\n      localStorage.setItem('findpharma_wishlist', JSON.stringify(items));\n      this.storageSub.next(JSON.stringify(items));\n    }\n  }\n  getWishlistProductsFromStorage() {\n    return localStorage.getItem('findpharma_wishlist') != null ? localStorage.getItem('findpharma_wishlist') : '';\n  }\n  getWishlistProductsLengthFromStorage() {\n    let storage = this.getWishlistProductsFromStorage();\n    return storage != null && storage != '' ? JSON.parse(storage).length : 0;\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}